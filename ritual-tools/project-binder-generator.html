<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Binder Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0B2A2F 0%, #0D3B2A 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #0B2A2F 0%, #0D3B2A 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            padding: 30px 40px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            overflow-x: auto;
        }

        .progress-step {
            flex: 1;
            text-align: center;
            position: relative;
            min-width: 80px;
        }

        .progress-step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 15px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: #dee2e6;
            z-index: 0;
        }

        .progress-step.active:not(:last-child)::after {
            background: #0D3B2A;
        }

        .progress-step.completed:not(:last-child)::after {
            background: #28a745;
        }

        .progress-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #dee2e6;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            position: relative;
            z-index: 1;
        }

        .progress-step.active .progress-number {
            background: #0D3B2A;
        }

        .progress-step.completed .progress-number {
            background: #28a745;
        }

        .progress-label {
            font-size: 0.85em;
            color: #6c757d;
            font-weight: 500;
        }

        .progress-step.active .progress-label {
            color: #2B7A78;
            font-weight: 600;
        }

        .content {
            padding: 40px;
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
        }

        .step-content h2 {
            color: #2d3748;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .step-intro {
            color: #718096;
            font-size: 1.05em;
            line-height: 1.6;
            margin-bottom: 30px;
            padding: 20px;
            background: #f7fafc;
            border-left: 4px solid #2B7A78;
            border-radius: 4px;
        }

        .example-box {
            background: #edf2f7;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.95em;
            color: #4a5568;
            border-left: 3px solid #4299e1;
        }

        .example-box strong {
            color: #2d3748;
        }

        .form-field {
            margin-bottom: 25px;
        }

        .form-field label {
            display: block;
            color: #2d3748;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        .text-input, .textarea-input, .select-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .text-input:focus, .textarea-input:focus, .select-input:focus {
            outline: none;
            border-color: #2B7A78;
        }

        .textarea-input {
            resize: vertical;
            min-height: 100px;
        }

        .belief-row {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .belief-row h3 {
            color: #4a5568;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .belief-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .belief-col label {
            display: block;
            font-size: 0.9em;
            color: #718096;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .belief-preview {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #48bb78;
            color: #2d3748;
            font-style: italic;
            display: none;
        }

        .belief-preview.show {
            display: block;
        }

        .item-list {
            margin-bottom: 20px;
        }

        .item-entry {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .item-entry input {
            flex: 1;
        }

        .remove-btn {
            background: #fed7d7;
            color: #c53030;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .add-btn {
            background: #e6f2ff;
            color: #2B7A78;
            border: 2px dashed #2B7A78;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s;
        }

        .add-btn:hover {
            background: #0D3B2A;
            color: white;
        }

        .teammate-section {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .teammate-section h3 {
            color: #4a5568;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .review-section {
            background: #f7fafc;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid #48bb78;
        }

        .review-section h3 {
            color: #2d3748;
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .review-section p {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .success-message {
            background: #c6f6d5;
            color: #22543d;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #38a169;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            padding: 30px 40px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }

        .nav-button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-button.primary {
            background: linear-gradient(135deg, #0B2A2F 0%, #0D3B2A 100%);
            color: white;
        }

        .nav-button.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .nav-button.secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .nav-button.secondary:hover {
            background: #cbd5e0;
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .download-btn {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: block;
            margin: 20px auto;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(72, 187, 120, 0.4);
        }

        @media (max-width: 768px) {
            .belief-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Project Binder Generator</h1>
            <p>Build your team's collaboration foundation in 7 steps</p>
        </div>

        <div class="progress-bar" id="progressBar"></div>

        <div class="content">
            <!-- Step 0: I Believe Exercise -->
            <div class="step-content active" data-step="0">
                <h2>Let's start with your beliefs üåü</h2>
                <p class="step-intro">
                    These beliefs ground your approach to working with AI. They're your team's philosophy‚Äîwhat you believe about AI collaboration and what makes it powerful. Create 3 belief statements by choosing from each column.
                </p>
                
                <div class="example-box">
                    <strong>Example:</strong> "I believe that AI can be a true creative collaborator and is powerful when we iterate together on outputs."
                </div>
                
                <div id="beliefsContainer"></div>
            </div>

            <!-- Step 1: Team Purpose -->
            <div class="step-content" data-step="1">
                <h2>Tell me about your project üéØ</h2>
                <p class="step-intro">
                    This is your team's north star‚Äîwhat you're building and why. Clear purpose keeps everyone (AI and human) aligned on what matters.
                </p>
                
                <div class="example-box">
                    <strong>Example:</strong> "We're building a guide series to help non-technical teams work confidently together. Success looks like readers can set up their first Project Binder in under 15 minutes."
                </div>
                
                <div class="form-field">
                    <label>What are you building?</label>
                    <input type="text" class="text-input" id="projectName" 
                           placeholder="e.g., a content series, a product feature, a research project">
                </div>

                <div class="form-field">
                    <label>What's your goal? What are you hoping to accomplish?</label>
                    <textarea class="textarea-input" id="projectGoal" rows="3"
                              placeholder="e.g., help people work effectively as a team, reduce burnout through better tools"></textarea>
                </div>

                <div class="form-field">
                    <label>Success looks like...</label>
                    <textarea class="textarea-input" id="successLooks" rows="3"
                              placeholder="e.g., users can complete setup in 15 minutes, team feels more aligned"></textarea>
                </div>

                <div class="form-field">
                    <label>Voice should be...</label>
                    <input type="text" class="text-input" id="voiceCharacteristics"
                           placeholder="e.g., warm and practical, like a brilliant friend over coffee">
                </div>

                <div class="form-field">
                    <label>Lines we don't cross...</label>
                    <textarea class="textarea-input" id="linesNotCross" rows="2"
                              placeholder="e.g., no corporate jargon, no hype without proof"></textarea>
                </div>
            </div>

            <!-- Step 2: Voice Profile -->
            <div class="step-content" data-step="2">
                <h2>Let's define your voice üé§</h2>
                <p class="step-intro">
                    Your voice is how you communicate‚Äîthe tone, personality, and style that makes your content distinctly yours. Be specific! "Professional" tells AI nothing. "Warm and direct, like a trusted colleague" gives clear direction.
                </p>
                
                <div class="example-box">
                    <strong>Example:</strong> "Authentic & vulnerable, Conversational & relatable, Actionable & practical"<br>
                    <strong>Avoid:</strong> "Corporate jargon, Hype without proof"
                </div>
                
                <h3 style="margin: 30px 0 15px; color: #4a5568;">What our voice IS</h3>
                <div id="voiceTraitsContainer"></div>

                <h3 style="margin: 30px 0 15px; color: #4a5568;">What we AVOID</h3>
                <div id="voiceAvoidContainer"></div>

                <h3 style="margin: 30px 0 15px; color: #4a5568;">Show me with examples</h3>
                <div class="form-field">
                    <label>DO (Good example of your voice):</label>
                    <textarea class="textarea-input" id="voiceDo" rows="2"
                              placeholder='e.g., "What if resilience isn'"'"'t about toughing it out?"'></textarea>
                </div>

                <div class="form-field">
                    <label>DON'T (What you want to avoid):</label>
                    <textarea class="textarea-input" id="voiceDont" rows="2"
                              placeholder='e.g., "Experts say you need better resilience strategies"'></textarea>
                </div>
            </div>

            <!-- Step 3: Team Members -->
            <div class="step-content" data-step="3">
                <h2>Who's on your team? üë•</h2>
                <p class="step-intro">
                    Tell me about everyone on your team‚Äîhumans and AI. Who are they? What are their primary responsibilities?
                </p>
                
                <div class="example-box">
                    <strong>Example:</strong><br>
                    <strong>Maura (Human)</strong> - Title/Role: Product Lead. Primary Responsibilities: Final product decisions, strategic direction, user perspective.<br>
                    <strong>CP (AI - ChatGPT)</strong> - Title/Role: Creative Partner. Primary Responsibilities: Rapid ideation, multiple variations, creative exploration.<br>
                    <strong>Soph (AI - Claude)</strong> - Title/Role: Chief of Staff. Primary Responsibilities: Synthesis, documentation, technical architecture.
                </div>
                
                <div id="teammatesContainer"></div>
                <button class="add-btn" onclick="addTeammate()">+ Add Another Teammate</button>
                
                <!-- Alpha Redi Suggestion -->
                <div class="info-box" style="margin-top: 30px; background: #e8f5e9; border-left: 4px solid #4caf50;">
                    <h4 style="color: #2e7d32; margin-bottom: 10px;">üí° Consider adding Alpha Redi</h4>
                    <p style="margin-bottom: 10px;">
                        <strong>Alpha Redi</strong> is an AI assistant designed specifically for team rituals and decision-making tools. 
                        Redi provides contextual help within your apps‚Äîacting as a Consensus Driver in Co-Sign, Pattern Analyzer in AlignFirst, 
                        and Risk Navigator in Sprint Kickoff.
                    </p>
                    <p style="margin: 0; font-size: 0.9em; color: #555;">
                        <strong>Title/Role:</strong> Team Facilitator<br>
                        <strong>Primary Responsibilities:</strong> Consensus driving, pattern recognition, decision support, contextual recommendations
                    </p>
                </div>
            </div>

            <!-- Step 4: Context Library -->
            <div class="step-content" data-step="4">
                <h2>Your context library üìö</h2>
                <p class="step-intro">
                    What essential documents, decisions, or references should your team always have access to? This is your team's institutional knowledge.
                </p>
                
                <div class="example-box">
                    <strong>Essential docs:</strong> Brand guidelines, product roadmap, user research<br>
                    <strong>Key decisions:</strong> We're focusing on non-technical users first, We prioritize clarity over features
                </div>
                
                <h3 style="margin: 30px 0 15px; color: #4a5568;">Essential Documents</h3>
                <div id="docsContainer" class="item-list"></div>
                <button class="add-btn" onclick="addDoc()">+ Add Document</button>

                <h3 style="margin: 30px 0 15px; color: #4a5568;">Key Decisions</h3>
                <div id="decisionsContainer" class="item-list"></div>
                <button class="add-btn" onclick="addDecision()">+ Add Decision</button>
            </div>

            <!-- Step 5: Communication Protocols -->
            <div class="step-content" data-step="5">
                <h2>How does your team sync? üìÑ</h2>
                <p class="step-intro">
                    Communication protocols keep your team aligned. How often do you check in? How do you pass context when threads end?
                </p>
                
                <div class="example-box">
                    <strong>Sync pattern:</strong> Daily async updates, weekly deep-dives<br>
                    <strong>Handoff process:</strong> End every thread with a note documenting decisions and next steps
                </div>
                
                <div class="form-field">
                    <label>Our sync pattern</label>
                    <textarea class="textarea-input" id="syncPattern" rows="3"
                              placeholder="e.g., daily async updates, weekly syncs, check-ins at milestones"></textarea>
                </div>

                <div class="form-field">
                    <label>Handoff process</label>
                    <textarea class="textarea-input" id="handoffProcess" rows="3"
                              placeholder="e.g., end every thread with handoff note, use Message Bus Protocol"></textarea>
                </div>

                <div class="form-field">
                    <label>Standup frequency</label>
                    <input type="text" class="text-input" id="standupFrequency"
                           placeholder="e.g., daily, weekly, as-needed">
                </div>
            </div>

            <!-- Step 6: Gut-Check Framework -->
            <div class="step-content" data-step="6">
                <h2>Your decision framework üé≤</h2>
                <p class="step-intro">
                    How does your team make decisions? What's your process when you're aligned? What do you do when you're stuck?
                </p>
                
                <div class="example-box">
                    <strong>Decision process:</strong> Run assumption checks, consult brand guidelines, human has final say<br>
                    <strong>When stuck:</strong> Reframe the problem, take a trust check if energy feels off
                </div>
                
                <div class="form-field">
                    <label>Our decision process</label>
                    <textarea class="textarea-input" id="decisionProcess" rows="3"
                              placeholder="e.g., run assumption checks, consult docs, iterate on options, human makes final call"></textarea>
                </div>

                <div class="form-field">
                    <label>When we're stuck</label>
                    <textarea class="textarea-input" id="whenStuck" rows="3"
                              placeholder="e.g., take a step back and reframe, look for hidden assumptions"></textarea>
                </div>

                <div class="form-field">
                    <label>How we check alignment</label>
                    <textarea class="textarea-input" id="alignmentCheck" rows="3"
                              placeholder='e.g., end each session with "what feels clear or uncertain?"'></textarea>
                </div>
            </div>

            <!-- Step 7: Review & Download -->
            <div class="step-content" data-step="7">
                <h2>Your Project Binder is ready! üéâ</h2>
                <p class="step-intro">
                    Here's everything we built together. You can download the complete Project Binder for documentation,
                    or just the Team Context Card to import across your ritual apps.
                </p>

                <div class="success-message">
                    ‚úì All 7 elements complete! Your Project Binder is ready to use.
                </div>
                
                <div id="reviewContainer"></div>

                <div style="display: flex; gap: 15px; margin: 30px 0; flex-wrap: wrap;">
                    <button class="download-btn" onclick="downloadBinder()" style="flex: 1; min-width: 250px;">
                        üì• Download Full Project Binder
                    </button>
                    <button class="download-btn" onclick="downloadContextCard()" style="flex: 1; min-width: 250px; background: #2B7A78;">
                        üé¥ Download Team Context Card
                    </button>
                </div>

                <p style="color: #718096; text-align: center; margin: 20px 0;">
                    <strong>Full Project Binder:</strong> Markdown file with all your project context<br>
                    <strong>Team Context Card:</strong> JSON file to import into Co-Sign, Sprint Kickoff, and other ritual apps
                </p>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-button secondary" id="prevBtn" onclick="previousStep()">‚Üê Previous</button>
            <button class="nav-button primary" id="nextBtn" onclick="nextStep()">Next ‚Üí</button>
        </div>
    </div>

    <script>
        // State management
        const state = {
            currentStep: 0,
            beliefs: [
                {col1: '', col2: '', col1Custom: '', col2Custom: ''},
                {col1: '', col2: '', col1Custom: '', col2Custom: ''},
                {col1: '', col2: '', col1Custom: '', col2Custom: ''}
            ],
            voiceTraits: ['', '', ''],
            voiceAvoid: ['', ''],
            teammates: [{name: '', type: '', role: '', responsibilities: ''}],
            docs: [{link: '', summary: ''}],
            decisions: [{text: '', summary: ''}]
        };

        const steps = [
            { title: "Beliefs", desc: "Your team collaboration principles" },
            { title: "Purpose", desc: "What you're building" },
            { title: "Voice", desc: "How you communicate" },
            { title: "Teammates", desc: "Your team" },
            { title: "Context", desc: "Essential knowledge" },
            { title: "Protocols", desc: "How you sync" },
            { title: "Decisions", desc: "Your framework" },
            { title: "Review", desc: "Finalize & download" }
        ];

        const beliefCol1Options = [
            "can be a true creative collaborator",
            "is most powerful when it augments human judgment",
            "works best with clear context and constraints",
            "should be treated as a teammate, not a tool",
            "needs iteration to produce great work",
            "can help us think differently about problems",
            "OTHER"
        ];

        const beliefCol2Options = [
            "we give it the full picture upfront",
            "we're specific about what we want",
            "we iterate together on outputs",
            "we maintain our strategic vision",
            "we're honest about what's working and what's not",
            "we treat it like a colleague we respect",
            "OTHER"
        ];

        // Initialize
        function init() {
            renderProgressBar();
            renderBeliefs();
            renderVoiceTraits();
            renderVoiceAvoid();
            renderTeammates();
            renderDocs();
            renderDecisions();
            updateNavigation();
        }

        // Progress bar
        function renderProgressBar() {
            const progressBar = document.getElementById('progressBar');
            progressBar.innerHTML = steps.map((step, index) => `
                <div class="progress-step ${index === state.currentStep ? 'active' : ''} ${index < state.currentStep ? 'completed' : ''}">
                    <div class="progress-number">${index < state.currentStep ? '‚úì' : index + 1}</div>
                    <div class="progress-label">${step.title}</div>
                </div>
            `).join('');
        }

        // Beliefs
        function renderBeliefs() {
            const container = document.getElementById('beliefsContainer');
            container.innerHTML = state.beliefs.map((belief, index) => `
                <div class="belief-row">
                    <h3>Belief Statement ${index + 1}</h3>
                    <div class="belief-grid">
                        <div class="belief-col">
                            <label>I believe that AI...</label>
                            <select class="select-input" onchange="handleBeliefChange(${index}, 'col1', this.value)">
                                <option value="">Select...</option>
                                ${beliefCol1Options.map(opt => `
                                    <option value="${opt}" ${belief.col1 === opt ? 'selected' : ''}>${opt === 'OTHER' ? 'Other - write your own' : opt}</option>
                                `).join('')}
                            </select>
                            <input type="text" class="text-input" id="beliefCol1Custom${index}" 
                                   placeholder="Write your own..." 
                                   style="margin-top: 10px; display: ${belief.col1 === 'OTHER' ? 'block' : 'none'};"
                                   oninput="updateBeliefCustom(${index}, 'col1', this.value)">
                        </div>
                        <div class="belief-col">
                            <label>...and is powerful when...</label>
                            <select class="select-input" onchange="handleBeliefChange(${index}, 'col2', this.value)">
                                <option value="">Select...</option>
                                ${beliefCol2Options.map(opt => `
                                    <option value="${opt}" ${belief.col2 === opt ? 'selected' : ''}>${opt === 'OTHER' ? 'Other - write your own' : opt}</option>
                                `).join('')}
                            </select>
                            <input type="text" class="text-input" id="beliefCol2Custom${index}" 
                                   placeholder="Write your own..." 
                                   style="margin-top: 10px; display: ${belief.col2 === 'OTHER' ? 'block' : 'none'};"
                                   oninput="updateBeliefCustom(${index}, 'col2', this.value)">
                        </div>
                    </div>
                    <div class="belief-preview ${belief.col1 && belief.col2 ? 'show' : ''}" id="beliefPreview${index}">
                        ‚úì I believe that AI ${belief.col1 === 'OTHER' ? (belief.col1Custom || '[write your own]') : belief.col1} and is powerful when ${belief.col2 === 'OTHER' ? (belief.col2Custom || '[write your own]') : belief.col2}.
                    </div>
                </div>
            `).join('');
        }

        function handleBeliefChange(index, col, value) {
            state.beliefs[index][col] = value;
            const customInput = document.getElementById(`belief${col === 'col1' ? 'Col1' : 'Col2'}Custom${index}`);
            if (customInput) {
                customInput.style.display = value === 'OTHER' ? 'block' : 'none';
            }
            updateBeliefPreview(index);
        }

        function updateBeliefCustom(index, col, value) {
            const customKey = col + 'Custom';
            if (!state.beliefs[index][customKey]) {
                state.beliefs[index][customKey] = '';
            }
            state.beliefs[index][customKey] = value;
            updateBeliefPreview(index);
        }

        function updateBeliefPreview(index) {
            const preview = document.getElementById(`beliefPreview${index}`);
            const belief = state.beliefs[index];
            const col1Text = belief.col1 === 'OTHER' ? (belief.col1Custom || '[write your own]') : belief.col1;
            const col2Text = belief.col2 === 'OTHER' ? (belief.col2Custom || '[write your own]') : belief.col2;
            
            if (belief.col1 && belief.col2) {
                preview.textContent = `‚úì I believe that AI ${col1Text} and is powerful when ${col2Text}.`;
                preview.classList.add('show');
            } else {
                preview.classList.remove('show');
            }
        }

        function updateBelief(index, col, value) {
            // Legacy function - now using handleBeliefChange
            handleBeliefChange(index, col, value);
        }

        // Voice traits
        function renderVoiceTraits() {
            const container = document.getElementById('voiceTraitsContainer');
            container.innerHTML = state.voiceTraits.map((trait, index) => `
                <div class="form-field">
                    <input type="text" class="text-input" value="${trait}"
                           placeholder="${index === 0 ? 'e.g., Authentic & vulnerable' : index === 1 ? 'e.g., Conversational & relatable' : 'e.g., Actionable & practical'}"
                           oninput="state.voiceTraits[${index}] = this.value">
                </div>
            `).join('');
        }

        function renderVoiceAvoid() {
            const container = document.getElementById('voiceAvoidContainer');
            container.innerHTML = state.voiceAvoid.map((avoid, index) => `
                <div class="form-field">
                    <input type="text" class="text-input" value="${avoid}"
                           placeholder="${index === 0 ? 'e.g., Corporate jargon' : 'e.g., Hype without proof'}"
                           oninput="state.voiceAvoid[${index}] = this.value">
                </div>
            `).join('');
        }

        // Teammates
        function renderTeammates() {
            const container = document.getElementById('teammatesContainer');
            container.innerHTML = state.teammates.map((teammate, index) => `
                <div class="teammate-section">
                    <h3>Teammate ${index + 1}</h3>
                    <div class="form-field">
                        <label>Name or identifier</label>
                        <input type="text" class="text-input" value="${teammate.name}"
                               placeholder="e.g., Maura, CP (ChatGPT), Soph (Claude)"
                               oninput="state.teammates[${index}].name = this.value">
                    </div>
                    <div class="form-field">
                        <label>Type</label>
                        <select class="text-input" 
                                onchange="state.teammates[${index}].type = this.value">
                            <option value="" ${!teammate.type ? 'selected' : ''}>Select type...</option>
                            <option value="human" ${teammate.type === 'human' ? 'selected' : ''}>üë§ Human</option>
                            <option value="ai" ${teammate.type === 'ai' ? 'selected' : ''}>ü§ñ AI</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label>Title/Role</label>
                        <input type="text" class="text-input" value="${teammate.role || ''}"
                               placeholder="e.g., Product Lead, Chief of Staff, Content Strategist"
                               oninput="state.teammates[${index}].role = this.value">
                    </div>
                    <div class="form-field">
                        <label>Primary Responsibilities</label>
                        <textarea class="textarea-input" rows="3"
                                  placeholder="e.g., Final product decisions, strategic direction, user research and validation"
                                  oninput="state.teammates[${index}].responsibilities = this.value">${teammate.responsibilities || ''}</textarea>
                    </div>
                    ${state.teammates.length > 1 ? `<button class="remove-btn" onclick="removeTeammate(${index})">Remove Teammate</button>` : ''}
                </div>
            `).join('');
        }

        function addTeammate() {
            state.teammates.push({name: '', type: '', role: '', responsibilities: ''});
            renderTeammates();
        }

        function removeTeammate(index) {
            if (state.teammates.length > 1) {
                state.teammates.splice(index, 1);
                renderTeammates();
            }
        }

        // Docs & Decisions
        function renderDocs() {
            const container = document.getElementById('docsContainer');
            container.innerHTML = state.docs.map((doc, index) => `
                <div class="item-entry" style="display: block; margin-bottom: 25px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                    <input type="text" class="text-input" value="${doc.link || ''}"
                           placeholder="e.g., https://wiki.company.com/brand-guidelines"
                           oninput="state.docs[${index}].link = this.value"
                           style="margin-bottom: 10px;">
                    <textarea class="textarea-input" rows="2"
                              placeholder="Optional: Paste AI-generated summary to help your team understand this doc without reading the full thing"
                              oninput="state.docs[${index}].summary = this.value"
                              style="margin-bottom: 0; font-size: 0.9em; color: #666;">${doc.summary || ''}</textarea>
                    ${state.docs.length > 1 ? `<button class="remove-btn" onclick="removeDoc(${index})" style="position: absolute; top: 15px; right: 15px;">‚úï</button>` : ''}
                </div>
            `).join('');
        }

        function addDoc() {
            state.docs.push({link: '', summary: ''});
            renderDocs();
        }

        function removeDoc(index) {
            if (state.docs.length > 1) {
                state.docs.splice(index, 1);
                renderDocs();
            }
        }

        function renderDecisions() {
            const container = document.getElementById('decisionsContainer');
            container.innerHTML = state.decisions.map((decision, index) => `
                <div class="item-entry" style="display: block; margin-bottom: 25px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                    <input type="text" class="text-input" value="${decision.text || ''}"
                           placeholder="e.g., We're focusing on non-technical users first"
                           oninput="state.decisions[${index}].text = this.value"
                           style="margin-bottom: 10px;">
                    <textarea class="textarea-input" rows="2"
                              placeholder="Optional: Add context or rationale to help your team understand why this decision was made"
                              oninput="state.decisions[${index}].summary = this.value"
                              style="margin-bottom: 0; font-size: 0.9em; color: #666;">${decision.summary || ''}</textarea>
                    ${state.decisions.length > 1 ? `<button class="remove-btn" onclick="removeDecision(${index})" style="position: absolute; top: 15px; right: 15px;">‚úï</button>` : ''}
                </div>
            `).join('');
        }

        function addDecision() {
            state.decisions.push({text: '', summary: ''});
            renderDecisions();
        }

        function removeDecision(index) {
            if (state.decisions.length > 1) {
                state.decisions.splice(index, 1);
                renderDecisions();
            }
        }

        // Navigation
        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = state.currentStep === 0;
            
            if (state.currentStep === steps.length - 1) {
                nextBtn.textContent = 'Start Over';
                nextBtn.classList.remove('primary');
                nextBtn.classList.add('secondary');
            } else {
                nextBtn.textContent = 'Next ‚Üí';
                nextBtn.classList.add('primary');
                nextBtn.classList.remove('secondary');
            }
        }

        function nextStep() {
            if (state.currentStep === steps.length - 1) {
                state.currentStep = 0;
            } else {
                if (state.currentStep === 6) {
                    renderReview();
                }
                state.currentStep++;
            }
            showStep(state.currentStep);
        }

        function previousStep() {
            if (state.currentStep > 0) {
                state.currentStep--;
                showStep(state.currentStep);
            }
        }

        function showStep(stepIndex) {
            document.querySelectorAll('.step-content').forEach(el => {
                el.classList.remove('active');
            });
            document.querySelector(`.step-content[data-step="${stepIndex}"]`).classList.add('active');
            renderProgressBar();
            updateNavigation();
            window.scrollTo(0, 0);
        }

        // Review
        function renderReview() {
            const container = document.getElementById('reviewContainer');
            const beliefs = state.beliefs
                .filter(b => b.col1 && b.col2)
                .map(b => {
                    const col1Text = b.col1 === 'OTHER' ? (b.col1Custom || '[write your own]') : b.col1;
                    const col2Text = b.col2 === 'OTHER' ? (b.col2Custom || '[write your own]') : b.col2;
                    return `I believe that AI ${col1Text} and is powerful when ${col2Text}.`;
                })
                .join(' ');

            const projectName = document.getElementById('projectName').value || '[project name]';
            const projectGoal = document.getElementById('projectGoal').value || '[goal]';
            
            const teammates = state.teammates
                .filter(t => t.name)
                .map(t => {
                    const typeEmoji = t.type === 'human' ? 'üë§' : t.type === 'ai' ? 'ü§ñ' : '';
                    const role = t.role ? ` - ${t.role}` : '';
                    return `<li><strong>${typeEmoji} ${t.name}</strong>${role}<br>Primary Responsibilities: ${t.responsibilities || '[responsibilities]'}</li>`;
                })
                .join('');

            const docs = state.docs.filter(d => d.link).map(d => d.link).join(', ') || 'None added';
            const decisions = state.decisions.filter(d => d.text).map(d => d.text).join(', ') || 'None added';

            const syncPattern = document.getElementById('syncPattern').value || 'Not specified';
            const standupFrequency = document.getElementById('standupFrequency').value || 'Not specified';
            const decisionProcess = document.getElementById('decisionProcess').value || 'Not specified';

            container.innerHTML = `
                <div class="review-section">
                    <h3>1. Your Beliefs</h3>
                    <p>${beliefs || 'Complete Step 1 to add beliefs'}</p>
                </div>
                <div class="review-section">
                    <h3>2. Team Purpose</h3>
                    <p><strong>${projectName}</strong> - ${projectGoal}</p>
                </div>
                <div class="review-section">
                    <h3>3. Voice Profile</h3>
                    <p>What we are: ${state.voiceTraits.filter(t => t).join(', ') || 'Not specified'}</p>
                    <p>What we avoid: ${state.voiceAvoid.filter(t => t).join(', ') || 'Not specified'}</p>
                </div>
                <div class="review-section">
                    <h3>4. Team Members</h3>
                    <ul>${teammates || '<li>None added</li>'}</ul>
                </div>
                <div class="review-section">
                    <h3>5. Context Library</h3>
                    <p>Essential docs: ${docs}</p>
                    <p>Key decisions: ${decisions}</p>
                </div>
                <div class="review-section">
                    <h3>6. Communication Protocols</h3>
                    <p>Sync: ${syncPattern}</p>
                    <p>Standups: ${standupFrequency}</p>
                </div>
                <div class="review-section">
                    <h3>7. Decision Framework</h3>
                    <p>${decisionProcess}</p>
                </div>
            `;
        }

        // Download
        function downloadBinder() {
            const beliefs = state.beliefs
                .filter(b => b.col1 && b.col2)
                .map(b => {
                    const col1Text = b.col1 === 'OTHER' ? (b.col1Custom || '[write your own]') : b.col1;
                    const col2Text = b.col2 === 'OTHER' ? (b.col2Custom || '[write your own]') : b.col2;
                    return `I believe that AI ${col1Text} and is powerful when ${col2Text}.`;
                })
                .join('\n\n');

            const teammates = state.teammates
                .filter(t => t.name)
                .map(t => {
                    const typeEmoji = t.type === 'human' ? 'üë§' : t.type === 'ai' ? 'ü§ñ' : '';
                    const role = t.role ? `\n- Title/Role: ${t.role}` : '';
                    return `**${typeEmoji} ${t.name}**${role}\n- Primary Responsibilities: ${t.responsibilities || '[describe their primary responsibilities]'}`;
                })
                .join('\n\n');

            const docs = state.docs
                .filter(d => d.link)
                .map(d => {
                    if (d.summary) {
                        return `- ${d.link}\n  *Summary: ${d.summary}*`;
                    }
                    return `- ${d.link}`;
                })
                .join('\n');
            
            const decisions = state.decisions
                .filter(d => d.text)
                .map(d => {
                    if (d.summary) {
                        return `- ${d.text}\n  *Context: ${d.summary}*`;
                    }
                    return `- ${d.text}`;
                })
                .join('\n');

            const markdown = `# PROJECT BINDER
Generated: ${new Date().toLocaleDateString()}

---

## 1. I BELIEVE: TEAM COLLABORATION PRINCIPLES

${beliefs || 'Define your beliefs about team collaboration.'}

---

## 2. TEAM PURPOSE STATEMENT

We're building **${document.getElementById('projectName').value || '[project name]'}** to ${document.getElementById('projectGoal').value || '[describe your goal]'}.

**Success looks like:** ${document.getElementById('successLooks').value || '[what does done look like?]'}

**Voice should be:** ${document.getElementById('voiceCharacteristics').value || '[key characteristics]'}

**Lines we don't cross:** ${document.getElementById('linesNotCross').value || '[your constraints]'}

---

## 3. VOICE PROFILE

### What Our Voice Is:
${state.voiceTraits.filter(t => t).map(t => `- ${t}`).join('\n') || '- [Voice characteristic 1]\n- [Voice characteristic 2]\n- [Voice characteristic 3]'}

### What We Avoid:
${state.voiceAvoid.filter(t => t).map(t => `- ${t}`).join('\n') || '- [Thing to avoid 1]\n- [Thing to avoid 2]'}

### Examples:
**Do:** ${document.getElementById('voiceDo').value || '[Example of good voice]'}

**Don't:** ${document.getElementById('voiceDont').value || '[Example of bad voice]'}

---

## 4. TEAM PROFILES

${teammates || 'Define your team members.'}

---

## 5. CONTEXT LIBRARY

### Essential Documents:
${docs || '- [Document 1]\n- [Document 2]'}

### Key Decisions:
${decisions || '- [Decision 1]\n- [Decision 2]'}

---

## 6. COMMUNICATION PROTOCOLS

**Our sync pattern:** ${document.getElementById('syncPattern').value || '[describe how often and how you sync]'}

**Handoff process:** ${document.getElementById('handoffProcess').value || '[how you pass context between threads/teammates]'}

**Standup frequency:** ${document.getElementById('standupFrequency').value || '[daily, weekly, as-needed]'}

---

## 7. GUT-CHECK FRAMEWORK

**Decision process:** ${document.getElementById('decisionProcess').value || '[how you make decisions as a team]'}

**When stuck:** ${document.getElementById('whenStuck').value || '[what you do when blocked]'}

**Alignment check:** ${document.getElementById('alignmentCheck').value || '[how you verify everyone is aligned]'}

---

## NEXT STEPS

Your Project Binder is ready!

**To use it:**
1. Save this file to Google Docs, Notion, or your preferred tool
2. Share it with your team at the start of each project phase
3. Update it as your project evolves
4. Reference it when you need to maintain consistency

---

*Built with the Project Binder Generator*
*Part of AI on Our Teams by Maura Randall*
*https://maurakrandall.com*
`;

            const blob = new Blob([markdown], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const projectName = document.getElementById('projectName').value || 'new';
            a.download = `project-binder-${projectName.toLowerCase().replace(/\s+/g, '-')}.md`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function downloadContextCard() {
            // Generate Context Card JSON
            const projectName = document.getElementById('projectName').value || 'Untitled Project';
            
            const contextCard = {
                version: "1.0",
                projectName: projectName,
                exportDate: new Date().toISOString(),
                team: state.teammates
                    .filter(t => t.name && t.name.trim() !== '')
                    .map(t => ({
                        name: t.name,
                        type: t.type || 'human',
                        role: t.role || '',
                        responsibilities: t.responsibilities || ''
                    }))
            };
            
            // Download as JSON
            const json = JSON.stringify(contextCard, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `team_context_card_${projectName.toLowerCase().replace(/\s+/g, '-')}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
