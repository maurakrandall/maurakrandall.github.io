<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Trust Check - AI Collaboration Tools</title>
    <meta name="description" content="A 5-question pulse to sense psychological safety, reliability, candor, humility, and values-alignment.">
    <style>
        :root{
          --bg:#FFF8F0; --ink:#222; --mut:#636a73; --bord:#e6e2da; --teal:#2A9D8F;
          --card:#fff; --shadow:0 2px 10px rgba(0,0,0,.06);
        }
        *{box-sizing:border-box}
        body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Arial}
        .wrap{max-width:860px;margin:0 auto;padding:18px}
        h1{font-size:22px;margin:0 0 6px}
        h2{font-size:18px;margin:0 0 8px}
        h3{font-size:15px;margin:0 0 6px}
        .sub{color:var(--mut);margin:0 0 14px}
        .tiny{font-size:12px;color:var(--mut);margin-top:10px}
        .card{
          background:var(--card);
          border:1px solid var(--bord);
          border-radius:16px;
          padding:16px;
          box-shadow:var(--shadow);
          position:relative;
        }
        .legend-pill{
          background:#fff;
          border:1px solid var(--bord);
          border-radius:999px;
          padding:6px 12px;
          font-weight:700;
          color:#333;
          margin-left:8px;
        }
        .q{margin:12px 0 14px}
        .scale{display:flex;gap:8px;margin-top:6px;flex-wrap:wrap}
        .scale input{display:none}
        .scale label{
          border:1px solid var(--bord);
          border-radius:10px;
          padding:6px 10px;
          cursor:pointer;
          min-width:38px;
          text-align:center;
          background:#fff;
          user-select:none;
          transition:transform .04s ease;
        }
        .scale input:checked + label{
          background:var(--teal);
          color:#fff;
          border-color:var(--teal);
          font-weight:700;
          transform:translateY(-1px);
        }
        .notes-label{display:block;margin:10px 0 6px;color:var(--mut)}
        textarea{
          width:100%; border:1px solid var(--bord); border-radius:12px; padding:10px;
          resize:vertical; background:#fff; min-height:70px;
        }
        .bar{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
        button{
          appearance:none; border:1px solid var(--bord); background:#fff; color:var(--ink);
          border-radius:12px; padding:10px 14px; font-weight:700; cursor:pointer;
        }
        button.primary{background:var(--teal); color:#fff; border-color:var(--teal)}
        .out{margin-top:16px}
        .grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
        @media (min-width:760px){.grid{grid-template-columns:1fr 1fr}}
        .tile{border:1px solid var(--bord); border-radius:12px; padding:12px; background:#fff}
        .scoreRow{display:flex;align-items:center;gap:12px;margin:6px 0 12px}
        .scoreBadge{
          width:64px;height:64px;border-radius:14px;border:2px solid var(--bord);
          display:flex;align-items:center;justify-content:center;font-weight:800;font-size:18px;background:#fff;
        }
        .scoreLabel{font-weight:800}
    </style>
</head>
<body>
    <div class="wrap" role="region" aria-labelledby="t">
      <h1 id="t">ü§ù Team Trust Check</h1>
      <p class="sub">A 5-question pulse to sense psychological safety, reliability, candor, humility, and values-alignment. No names. Patterns, not people.</p>
      <form id="trustForm" novalidate>
        <fieldset class="card">
          <legend class="legend-pill">üìä Rate each statement (1 = strongly disagree, 5 = strongly agree)</legend>
          <div class="q">
            <label for="q1"><strong>1.</strong> üõü I can safely share when I'm uncertain or stuck.</label>
            <div class="scale" data-for="q1"></div>
          </div>
          <div class="q">
            <label for="q2"><strong>2.</strong> ‚úÖ Team members follow through on what they say they'll do.</label>
            <div class="scale" data-for="q2"></div>
          </div>
          <div class="q">
            <label for="q3"><strong>3.</strong> üó£Ô∏è We can give feedback without fear of judgment.</label>
            <div class="scale" data-for="q3"></div>
          </div>
          <div class="q">
            <label for="q4"><strong>4.</strong> üß≠ Leaders model humility and openness.</label>
            <div class="scale" data-for="q4"></div>
          </div>
          <div class="q">
            <label for="q5"><strong>5.</strong> üß© Our actions match our stated values.</label>
            <div class="scale" data-for="q5"></div>
          </div>
          <label for="notes" class="notes-label">Optional note (what's one signal you're seeing?):</label>
          <textarea id="notes" rows="2" placeholder="e.g., Folks hesitate to surface risks until late‚Ä¶"></textarea>
          <div class="bar">
            <button type="button" id="btnScore" class="primary">Calculate Score</button>
            <button type="button" id="btnReset">Reset</button>
          </div>
        </fieldset>
      </form>
      <section id="out" class="card out" aria-live="polite" hidden>
        <h2>Team Trust Summary</h2>
        <div class="scoreRow">
          <div class="scoreBadge" id="scoreBadge">‚Äî</div>
          <div class="scoreMeta">
            <div id="scoreLabel" class="scoreLabel">‚Äî</div>
            <div id="scoreDetail" class="tiny">‚Äî</div>
          </div>
        </div>
        <div class="grid">
          <div class="tile">
            <h3>Signals</h3>
            <ul id="signals"></ul>
          </div>
          <div class="tile">
            <h3>Suggested Next Loop</h3>
            <ul id="suggestions"></ul>
          </div>
        </div>
        <div class="tiny" id="stamp"></div>
        <div class="bar">
          <button type="button" id="btnCopy" class="primary">Copy Summary</button>
        </div>
      </section>
      <p class="tiny">Designed for Pep'r. Measures the <em>team system</em> (not individuals). Use weekly or bi-weekly.</p>
    </div>

    <script>
        // Build 1‚Äì5 radio scales for each question
        ["q1","q2","q3","q4","q5"].forEach(id=>{
          const host = document.querySelector(`.scale[data-for="${id}"]`);
          for(let i=1;i<=5;i++){
            const inp = Object.assign(document.createElement('input'),{type:'radio',name:id,id:`${id}_${i}`,value:i});
            const lab = Object.assign(document.createElement('label'),{htmlFor:`${id}_${i}`});
            lab.textContent = i;
            host.appendChild(inp);
            host.appendChild(lab);
          }
        });

        const $ = sel => document.querySelector(sel);
        const out = $("#out");
        const scoreBadge = $("#scoreBadge");
        const scoreLabel = $("#scoreLabel");
        const scoreDetail = $("#scoreDetail");
        const signals = $("#signals");
        const suggestions = $("#suggestions");
        const stamp = $("#stamp");

        function getVal(name){
          const el = document.querySelector(`input[name="${name}"]:checked`);
          return el ? +el.value : 0;
        }

        function interpret(vals){
          const [v1,v2,v3,v4,v5] = vals;
          const total = v1+v2+v3+v4+v5;                   // 5‚Äì25
          const pct = Math.round((total-5)/(25-5)*100);   // 0‚Äì100 normalized

          // Sub-dimensions
          const safety = (v1+v3)/2;
          const reliability = v2;
          const humility = v4;
          const values = v5;

          // Overall label
          let label, detail;
          if (pct >= 80){ label="Strong Trust"; detail="High safety & reliability; protect & sustain." }
          else if (pct >= 60){ label="Steady but Fragile"; detail="Trust present; shore up weaker dimensions." }
          else if (pct >= 40){ label="Cautious"; detail="Safety or reliability gaps; address root signals." }
          else { label="Low Trust"; detail="Name reality, slow down, rebuild safety rituals first." }

          const sigs = [];
          const tips = [];

          if (safety <= 3){
            sigs.push("Low psychological safety or candor.");
            tips.push("Run `/reframe` to normalize uncertainty & surface unspoken worries.");
            tips.push("Try `/assumption_check` to make risks discussable.");
          }
          if (reliability <= 3){
            sigs.push("Follow-through / reliability concerns.");
            tips.push("Close loops with `/next3` (owners + dates).");
            tips.push("Add a quick `/celebrate` for visible completions.");
          }
          if (humility <= 3){
            sigs.push("Leaders may not be modeling openness.");
            tips.push("Leaders go first: share a learning in next stand-up.");
          }
          if (values <= 3){
            sigs.push("Values ‚Üî actions mismatch is felt.");
            tips.push("Run a short system-map check: calendars vs stated priorities.");
          }

          tips.push("Mini ritual: üå° Temp Check weekly to watch trend.");
          tips.push("Mini ritual: ‚òÄÔ∏è Warm-Up for 3 minutes to seed candor.");

          return { pct, label, detail, safety, reliability, humility, values, sigs, tips };
        }

        function renderSummary(m){
          scoreBadge.textContent = m.pct;
          scoreLabel.textContent = m.label;
          scoreDetail.textContent = `${m.detail}  ¬∑  Safety ${m.safety.toFixed(1)} | Reliability ${m.reliability.toFixed(1)} | Humility ${m.humility.toFixed(1)} | Values ${m.values.toFixed(1)}`;

          signals.innerHTML = "";
          (m.sigs.length ? m.sigs : ["No acute signals detected. Maintain rituals."]).forEach(s=>{
            const li=document.createElement('li'); li.textContent=s; signals.appendChild(li);
          });

          suggestions.innerHTML = "";
          m.tips.forEach(s=>{
            const li=document.createElement('li'); li.textContent=s; suggestions.appendChild(li);
          });

          const dt = new Date().toLocaleString();
          const note = $("#notes").value?.trim();
          stamp.textContent = `Generated ${dt}${note ? " ¬∑ Note: "+note : ""}`;

          out.hidden = false;
          out.scrollIntoView({behavior:"smooth",block:"start"});
        }

        function buildClipboard(){
          const dt = new Date().toLocaleDateString();
          const lines = [
            `Team Trust Check ‚Äî ${dt}`,
            `Score: ${scoreBadge.textContent} (${scoreLabel.textContent})`,
            scoreDetail.textContent,
            `Signals: ${[...signals.querySelectorAll('li')].map(li=>li.textContent).join(' | ')}`,
            `Next loops: ${[...suggestions.querySelectorAll('li')].map(li=>li.textContent).join(' | ')}`,
          ];
          return lines.join('\n');
        }

        $("#btnScore").onclick = ()=>{
          const vals = ["q1","q2","q3","q4","q5"].map(getVal);
          if (vals.some(v=>v===0)){ alert("Please rate all 5 statements (1‚Äì5)."); return; }
          const model = interpret(vals);
          renderSummary(model);
        };

        $("#btnReset").onclick = ()=>{
          document.getElementById("trustForm").reset();
          out.hidden = true;
        };

        $("#btnCopy").onclick = ()=>{
          const txt = buildClipboard();
          navigator.clipboard.writeText(txt).then(()=>{
            const o = $("#btnCopy").textContent;
            $("#btnCopy").textContent = "‚úÖ Copied";
            setTimeout(()=>$("#btnCopy").textContent=o,900);
          });
        };
    </script>
</body>
</html>
